<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plane Tikets Handler</title>
</head>

<body>
  <script>

    var passangers = [
      { name: "Jane Doloop", paid: true, ticket: "coach" },
      { name: "Dr. Evel", paid: true, ticket: "firstclass" },
      { name: "Sue Property", paid: false, ticket: "firstclass" },
      { name: "John Funcall", paid: true, ticket: "coach" },
      { name: "Dr.Evil", paid: true, ticket: "coach" }
    ];


    // function tiketHandler (list){
    //   if (list.length == 0){
    //     return (console.log(list + " Arr is Empty!"));
    //   } else {
    //     passagersHandler(list);
    //   }

    // }

    // var processPassagers = function(list){
    //   for (var i = 0; i < list.length; i++){
    //       console.log("Passanger " + list[i].name);
    //       isPaid(list, i);
    //     }
    // }

    // var isPaid = function (list, i) {
    //   if (list[i].paid){
    //         console.log("He is paid for tikets!")
    //       } else {
    //         console.log("He is not paid for tikets!")
    //       };
    // }

    // function inBlackList (passangers) {
    //   if (passangers.name.indexOf("Sue Property")){
    //     return true;
    //   } else {
    //     return (console.log (passangers.name + " is Ban"));
    //     }

    // }

    // inBlackList(passangers);

    // tiketHandler(passangers);


    function processPassagers(passangers, testFunction) {
      for (let i = 0; i < passangers.length; i++) {
        if (testFunction(passangers[i])) {
          return false;
        }
      }
      return true;
    }

    function checkNoFlyList(passanger) {
      return (passanger.name === "Dr.Evil");
    }

    function checkNotPaid(passanger) {
      return (!passanger.paid);
    }


    var allCanFly = processPassagers(passangers, checkNoFlyList);

    if (!allCanFly) {
      console.log("The plane can`t tacke off: we have a passanger on the no-fly-list")
    }

    var allPaid = processPassagers(passangers, checkNotPaid);
    if (!allPaid) {
      console.log("The plane can`t take off: not everyone has paid.")
    }

    function printPassager(passanger) {
      var passagerName = "Passanger name: " + passanger.name;

      if (!passanger.paid) {
        return (console.log(passagerName + ". Status: Not Paid"));
      } else {
        return (console.log(passagerName + ". Status: Paid"));
      }
    }

    function createDrinkOrdrer(passanger) {
      var orderFunction;

      if (passanger.ticket === "firstclass") {
        orderFunction = function () {
          alert("Wold you like a coctail or wine");
        };
      } else if (passanger.ticket === "premium") {
        orderFunction = function () {
          alert("Would you like wine, cola or water?");
        };
      } else {
        orderFunction = function () {
          alert("Your choice is cola or water.");
        };
      }
      return orderFunction;
    }

    function serveCustomer(passanger) {
      var getDrinkOrderFunction = createDrinkOrdrer(passanger);

      getDrinkOrderFunction();

    }

    function servePassangers(passangers) {
      for (var i = 0; i < passangers.length; i++) {
        serveCustomer(passangers[i]);
      }
    }

    processPassagers(passangers, printPassager)

    servePassangers(passangers);

  </script>
</body>

</html>